<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#003366">
    <meta name="description" content="WoW-CSG Stepathon Challenge 2026 - Step Your Way to Victory!">
    <title>WoW-CSG Stepathon Challenge 2026</title>
    <!-- PWA Manifest -->
    <link rel="manifest" href="./manifest.json">
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="apple-touch-icon" href="favicon.svg">
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <!-- Microsoft Teams SDK (optional, only loads if in Teams) -->
    <script src="https://statics.teams.cdn.office.net/sdk/v1.11.0/js/MicrosoftTeams.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@4.1.1/dist/tesseract.min.js"></script>
    <!-- EmailJS SDK -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <!-- Teams Integration (optional) -->
    <script src="teams-integration.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-background">
                <div class="animated-shapes">
                    <div class="shape shape-1"></div>
                    <div class="shape shape-2"></div>
                    <div class="shape shape-3"></div>
                </div>
            </div>
            <div class="logo-section">
                <div class="csg-logo">
                    <img src="CSG_Logo_K_outline.jpg" alt="CSG Logo" class="csg-logo-img">
                </div>
                <h1 class="animated-title">WoW-CSG Stepathon Challenge 2026</h1>
            </div>
            <p class="subtitle">Step Your Way to Victory! üèÜ</p>
        </header>

        <div class="main-content">
            <!-- Challenge Info Card -->
            <div class="card info-card animated-card" tabindex="-1">
                <div class="challenge-header">
                    <div class="card-header-icon-wrapper">
                        <div class="card-header-icon">üìã</div>
                        <div class="icon-glow"></div>
                    </div>
                    <h2>Challenge Details</h2>
                </div>
                <div class="info-grid">
                    <div class="info-item pulse-animation info-item-1" tabindex="-1">
                        <div class="info-item-background"></div>
                        <div class="info-icon-wrapper">
                            <div class="info-icon">‚è±Ô∏è</div>
                            <div class="icon-ripple"></div>
                        </div>
                        <span class="label">Duration:</span>
                        <span class="value">2 Weeks</span>
                        <div class="info-item-shine"></div>
                    </div>
                    <div class="info-item pulse-animation info-item-2" style="animation-delay: 0.1s;" tabindex="-1">
                        <div class="info-item-background"></div>
                        <div class="info-icon-wrapper">
                            <div class="info-icon">üöÄ</div>
                            <div class="icon-ripple"></div>
                        </div>
                        <span class="label">Start Date:</span>
                        <span class="value" id="startDate">Feb 1, 2026</span>
                        <div class="info-item-shine"></div>
                    </div>
                    <div class="info-item pulse-animation info-item-3" style="animation-delay: 0.2s;" tabindex="-1">
                        <div class="info-item-background"></div>
                        <div class="info-icon-wrapper">
                            <div class="info-icon">üéØ</div>
                            <div class="icon-ripple"></div>
                        </div>
                        <span class="label">End Date:</span>
                        <span class="value" id="endDate">Feb 15, 2026</span>
                        <div class="info-item-shine"></div>
                    </div>
                    <div class="info-item pulse-animation info-item-4" style="animation-delay: 0.3s;" tabindex="-1">
                        <div class="info-item-background"></div>
                        <div class="info-icon-wrapper">
                            <div class="info-icon">üèÅ</div>
                            <div class="icon-ripple"></div>
                        </div>
                        <span class="label">Daily Goal:</span>
                        <span class="value">10,000 steps</span>
                        <div class="info-item-shine"></div>
                    </div>
                </div>
            </div>

            <!-- Login Section -->
            <div class="card" id="loginCard">
                <div class="login-header-with-help">
                    <div class="login-tabs">
                        <button type="button" class="login-tab active" data-tab="user">üë§ User Registration</button>
                        <button type="button" class="login-tab" data-tab="user-login">üîë User Login</button>
                    </div>
                    <button class="btn btn-secondary btn-small" id="loginHelpBtn" title="Get Help">‚ùì Help</button>
                </div>
                <div class="email-warning" id="storageNotice" style="display: none;">
                    <p>Accounts are stored in this browser only. Configure Firebase to enable cross-browser login.</p>
                </div>

                <!-- User Registration Form -->
                <div id="userLoginForm" class="login-form active">
                    <h2>Join the Challenge</h2>
                    <form id="registrationForm">
                        <!-- Honeypot field (hidden from users, bots might fill it) -->
                        <input type="text" id="website" name="website" style="display: none;" tabindex="-1" autocomplete="off">
                        
                        <div class="form-group">
                            <label for="employeeName">Full Name <span class="required">*</span></label>
                            <input type="text" id="employeeName" placeholder="Enter your full name" required autocomplete="name">
                        </div>
                        <div class="form-group">
                            <label for="employeeId">Employee ID <span class="required">*</span></label>
                            <input type="text" id="employeeId" placeholder="Enter your Employee ID" required autocomplete="off">
                            <small class="form-hint">Each Employee ID can only be registered once.</small>
                        </div>
                        <div class="form-group">
                            <label for="emailId">Email ID <span class="required">*</span></label>
                            <input type="email" id="emailId" placeholder="Enter your email address" required autocomplete="email">
                            <small class="form-hint">Your password will be sent to this email. Each email can only be used once.</small>
                        </div>
                        <div class="form-group">
                            <label for="username">Username <span class="required">*</span></label>
                            <input type="text" id="username" placeholder="Choose a username" required minlength="3" autocomplete="username">
                            <small class="form-hint">Minimum 3 characters. Must be unique.</small>
                        </div>
                        <div class="form-group">
                            <label for="password">Password <span class="required">*</span></label>
                            <input type="password" id="password" placeholder="Create a password" required minlength="6" autocomplete="new-password">
                            <small class="form-hint">Minimum 6 characters</small>
                        </div>
                        <div class="form-group">
                            <label for="confirmPassword">Confirm Password <span class="required">*</span></label>
                            <input type="password" id="confirmPassword" placeholder="Confirm your password" required autocomplete="new-password">
                        </div>
                        <div class="form-group captcha-group">
                            <label for="captchaAnswer">Security Check <span class="required">*</span></label>
                            <div class="captcha-container">
                                <div class="captcha-question" id="captchaQuestion"></div>
                                <input type="number" id="captchaAnswer" placeholder="Enter answer" required autocomplete="off" min="0">
                                <button type="button" class="btn btn-secondary btn-small" id="refreshCaptcha" title="Refresh CAPTCHA">üîÑ</button>
                            </div>
                            <small class="form-hint">Please solve the math problem to verify you're human.</small>
                        </div>
                        <button type="submit" class="btn btn-primary">Create Account & Join Challenge</button>
                    </form>
                </div>

                <!-- User Login Form (for existing users) -->
                <div id="userLoginFormExisting" class="login-form" style="display: none;">
                    <h2>Login to Challenge</h2>
                    <form id="loginForm">
                        <div class="form-group">
                            <label for="loginUsername">Username / Email / Employee ID <span class="required">*</span></label>
                            <input type="text" id="loginUsername" placeholder="Enter username, email, or Employee ID" required autocomplete="username">
                        </div>
                        <div class="form-group">
                            <label for="loginPassword">Password <span class="required">*</span></label>
                            <input type="password" id="loginPassword" placeholder="Enter your password" required autocomplete="current-password">
                        </div>
                        <div class="form-options">
                            <a href="#" id="forgotPasswordLink" class="forgot-password">üîë Forgot Password?</a>
                        </div>
                        <button type="submit" class="btn btn-primary">Login</button>
                        <div class="switch-form">
                            <p>Don't have an account? <a href="#" id="showRegistrationLink">Register here</a></p>
                        </div>
                    </form>
                </div>

            </div>

            <!-- Dashboard Section -->
            <div class="card dashboard" id="dashboardCard" style="display: none;">
                <div class="dashboard-header">
                    <h2>Welcome, <span id="userName"></span>! üëã</h2>
                    <div class="dashboard-header-actions">
                        <button class="btn btn-secondary" id="helpBtn" title="Get Help">‚ùì Help</button>
                        <button class="btn btn-secondary" id="logoutBtn">Logout</button>
                    </div>
                </div>

                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card stat-card-animated" data-stat="today">
                        <div class="stat-card-glow"></div>
                        <div class="stat-icon">üë£</div>
                        <div class="stat-value" id="todaySteps">0</div>
                        <div class="stat-label">Today's Steps</div>
                        <div class="stat-trend">‚Üë Real-time tracking</div>
                    </div>
                    <div class="stat-card stat-card-animated" data-stat="total" style="animation-delay: 0.1s;">
                        <div class="stat-card-glow"></div>
                        <div class="stat-icon">üìä</div>
                        <div class="stat-value" id="totalSteps">0</div>
                        <div class="stat-label">Total Steps</div>
                        <div class="stat-trend">üìà Cumulative</div>
                    </div>
                    <div class="stat-card stat-card-animated" data-stat="streak" style="animation-delay: 0.2s;">
                        <div class="stat-card-glow"></div>
                        <div class="stat-icon">üî•</div>
                        <div class="stat-value" id="streak">0</div>
                        <div class="stat-label">Day Streak</div>
                        <div class="stat-trend">Keep it going!</div>
                    </div>
                    <div class="stat-card stat-card-animated" data-stat="rank" style="animation-delay: 0.3s;">
                        <div class="stat-card-glow"></div>
                        <div class="stat-icon">üèÜ</div>
                        <div class="stat-value" id="rank">-</div>
                        <div class="stat-label">Your Rank</div>
                        <div class="stat-trend">Leaderboard position</div>
                    </div>
                </div>

                <!-- Progress Bar -->
                <div class="progress-section">
                    <div class="progress-header">
                        <h3>Daily Goal Progress</h3>
                        <span class="progress-badge" id="progressBadge">0%</span>
                    </div>
                    <div class="progress-bar-container">
                        <div class="progress-bar" id="progressBar">
                            <div class="progress-fill" id="progressFill"></div>
                            <span class="progress-text" id="progressText">0%</span>
                        </div>
                    </div>
                    <div class="progress-details">
                        <div class="progress-item">
                            <span class="progress-label">Goal:</span>
                            <span class="progress-value">10,000 steps</span>
                        </div>
                        <div class="progress-item">
                            <span class="progress-label">Remaining:</span>
                            <span class="progress-value highlight" id="remainingSteps">10,000</span>
                        </div>
                    </div>
                    <!-- Motivation Messages -->
                    <div class="motivation-messages" id="motivationMessages">
                        <div class="motivation-badge" id="motivationBadge" style="display: none;">
                            <span class="badge-icon">üéØ</span>
                            <span class="badge-text" id="badgeText"></span>
                        </div>
                    </div>
                </div>

                <!-- Add Steps Form -->
                <div class="add-steps-section">
                    <h3>üèÉ‚Äç‚ôÇÔ∏è ‚ûï Add Your Steps</h3>
                    
                    <!-- Input Method Tabs -->
                    <div class="input-method-tabs">
                        <button type="button" class="method-tab active" data-method="counter">üë£ Count Steps</button>
                        <button type="button" class="method-tab" data-method="manual">‚úèÔ∏è Manual Entry</button>
                        <button type="button" class="method-tab" data-method="screenshot">üì∑ From Screenshot</button>
                    </div>

                    <!-- Manual Entry Form -->
                    <form id="addStepsForm" class="steps-form" style="display: none;">
                        <div class="form-group">
                            <label for="stepsInput">Steps <span class="required">*</span></label>
                            <input type="number" id="stepsInput" placeholder="Enter steps" min="0" required>
                        </div>

                        <div class="form-group" id="screenshotGroup">
                            <label for="manualScreenshot">Screenshot <span class="required" id="screenshotRequired">*</span></label>
                            <div class="upload-area-small" id="manualUploadArea">
                                <input type="file" id="manualScreenshot" accept="image/*" style="display: none;">
                                <div class="upload-content-small">
                                    <div class="upload-icon-small">üì∑</div>
                                    <p class="upload-text-small">Click to upload screenshot</p>
                                    <p class="upload-hint-small" id="screenshotHint">Required for manual entry validation</p>
                                    <button type="button" class="btn btn-secondary" onclick="document.getElementById('manualScreenshot').click()">
                                        Choose Screenshot
                                    </button>
                                </div>
                            </div>
                            <div id="manualImagePreview" class="image-preview-small" style="display: none;">
                                <img id="manualPreviewImage" src="" alt="Screenshot preview">
                                <button type="button" class="btn btn-secondary" id="removeManualImageBtn">Remove</button>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary">Add Steps</button>
                    </form>

                    <!-- Screenshot Upload Form -->
                    <div id="screenshotForm" class="steps-form" style="display: none;">
                        <div class="upload-area" id="uploadArea">
                            <input type="file" id="screenshotInput" accept="image/*" style="display: none;">
                            <div class="upload-content">
                                <div class="upload-icon">üì∑</div>
                                <p class="upload-text">Click or drag screenshot here</p>
                                <p class="upload-hint">Supports: Fitbit, Apple Health, Google Fit, Samsung Health, etc.</p>
                                <button type="button" class="btn btn-secondary" onclick="document.getElementById('screenshotInput').click()">
                                    Choose Screenshot
                                </button>
                            </div>
                        </div>
                        
                        <!-- Image Preview -->
                        <div id="imagePreview" class="image-preview" style="display: none;">
                            <img id="previewImage" src="" alt="Screenshot preview">
                            <button type="button" class="btn btn-secondary" id="removeImageBtn">Remove</button>
                        </div>

                        <!-- OCR Processing -->
                        <div id="ocrProcessing" class="ocr-processing" style="display: none;">
                            <div class="spinner"></div>
                            <p>Analyzing screenshot... Please wait</p>
                        </div>

                        <!-- Extracted Steps Result -->
                        <div id="extractedResult" class="extracted-result" style="display: none;">
                            <div class="result-card">
                                <h4>üìä Detected Steps</h4>
                                <div class="extracted-steps">
                                    <span class="steps-value" id="extractedSteps">0</span>
                                    <span class="steps-label">steps</span>
                                </div>
                                <div class="result-actions">
                                    <button type="button" class="btn btn-secondary" id="editStepsBtn">Edit</button>
                                    <button type="button" class="btn btn-primary" id="confirmStepsBtn">Confirm & Add</button>
                                </div>
                                <div id="editStepsInput" class="edit-input" style="display: none;">
                                    <input type="number" id="editedSteps" placeholder="Enter correct steps" min="0">
                                    <button type="button" class="btn btn-primary" id="saveEditedStepsBtn">Save</button>
                                </div>
                                <details class="debug-info" style="margin-top: 15px; text-align: left;">
                                    <summary style="cursor: pointer; font-size: 0.85rem; opacity: 0.8;">üîç Debug Info (Click to view OCR text)</summary>
                                    <div style="margin-top: 10px; font-size: 0.75rem; background: rgba(0,0,0,0.2); padding: 10px; border-radius: 5px; max-height: 150px; overflow-y: auto;">
                                        <strong>OCR Detected Text:</strong>
                                        <pre id="debugOcrText" style="white-space: pre-wrap; word-break: break-all; margin-top: 5px; font-size: 0.7rem;"></pre>
                                    </div>
                                </details>
                            </div>
                        </div>
                    </div>

                    <!-- Step Counter Form -->
                    <div id="stepCounterForm" class="steps-form active" style="display: block;">
                        <div class="step-counter-container">
                            <div class="step-counter-header-section">
                                <div class="step-counter-icon">üö∂‚Äç‚ôÇÔ∏è</div>
                                <h3>Live Step Counter</h3>
                                <p class="step-counter-subtitle">Track your steps in real-time using your device's motion sensors</p>
                            </div>

                            <!-- Main Counter Display -->
                            <div class="step-counter-display-section">
                                <div class="step-counter-circle">
                                    <div class="step-counter-value-large" id="liveStepCount">0</div>
                                    <div class="step-counter-label-large">Steps</div>
                                    <div class="step-counter-pulse" id="counterPulse"></div>
                                </div>
                                
                                <!-- Timer Display -->
                                <div class="step-counter-timer" id="counterTimer" style="display: none;">
                                    <span class="timer-icon">‚è±Ô∏è</span>
                                    <span class="timer-value" id="timerValue">00:00</span>
                                </div>
                            </div>

                            <!-- Control Buttons -->
                            <div class="step-counter-controls-section">
                                <button type="button" class="btn btn-counter-start" id="startCounterBtn">
                                    <span class="btn-icon">‚ñ∂Ô∏è</span>
                                    <span class="btn-text">Start Counting</span>
                                </button>
                                <button type="button" class="btn btn-counter-stop" id="stopCounterBtn" style="display: none;">
                                    <span class="btn-icon">‚è∏Ô∏è</span>
                                    <span class="btn-text">Stop Counting</span>
                                </button>
                                <button type="button" class="btn btn-counter-reset" id="resetCounterBtn">
                                    <span class="btn-icon">üîÑ</span>
                                    <span class="btn-text">Reset</span>
                                </button>
                            </div>

                            <!-- Status and Info -->
                            <div class="step-counter-info-section">
                                <div class="counter-status-card" id="counterStatusCard">
                                    <div class="status-icon">‚ÑπÔ∏è</div>
                                    <div class="status-content">
                                        <p class="counter-status" id="counterStatus">Ready to start counting</p>
                                        <p class="counter-hint" id="counterHint">Click "Start Counting" and hold your phone while walking</p>
                                    </div>
                                </div>
                                
                                <div class="counter-tips">
                                    <h4>üí° Tips for Accurate Counting:</h4>
                                    <ul>
                                        <li>Hold your phone in your hand or pocket</li>
                                        <li>Walk naturally - the sensor detects your movement</li>
                                        <li>Keep your phone unlocked while counting</li>
                                        <li>Allow motion sensor permissions when prompted</li>
                                    </ul>
                                </div>
                            </div>

                            <!-- Action Buttons -->
                            <div class="step-counter-actions-section">
                                <button type="button" class="btn btn-success btn-large" id="saveCounterStepsBtn" style="display: none;">
                                    <span class="btn-icon">üíæ</span>
                                    <span class="btn-text">Save Steps & Update Leaderboard</span>
                                </button>
                            </div>

                            <!-- Permission Note -->
                            <div class="counter-permission-note" id="counterPermissionNote" style="display: none;">
                                <div class="permission-icon">‚ö†Ô∏è</div>
                                <div class="permission-text">
                                    <strong>Motion Sensor Permission Required</strong>
                                    <p>Please allow motion sensor access to enable step counting. This is required for accurate step detection.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Leaderboard Section -->
            <div class="card leaderboard-card">
                <h2>üèÖ Leaderboard</h2>
                <div class="leaderboard-filters">
                    <button class="filter-btn active" data-filter="total">Total Steps</button>
                    <button class="filter-btn" data-filter="today">Today</button>
                    <button class="filter-btn" data-filter="avg">Average</button>
                </div>
                <div class="leaderboard-list" id="leaderboardList">
                    <div class="leaderboard-item">
                        <div class="rank">1</div>
                        <div class="name">No participants yet</div>
                        <div class="steps">0 steps</div>
                    </div>
                </div>
            </div>

            <!-- Fitness Motivation Section -->
            <div class="card motivation-card">
                <h2>üí™ Daily Motivation</h2>
                <div class="motivation-content">
                    <div class="motivation-icon">üèÉ‚Äç‚ôÇÔ∏è</div>
                    <p class="motivation-text" id="dailyMotivation">"The only bad workout is the one that didn't happen!"</p>
                    <button class="btn btn-secondary" id="refreshMotivationBtn">Get New Motivation</button>
                </div>
                <div class="fitness-tips">
                    <h3>üí° Fitness Tips</h3>
                    <ul class="tips-list" id="fitnessTips">
                        <li>Take the stairs instead of the elevator</li>
                        <li>Park farther away to add extra steps</li>
                        <li>Take short walking breaks every hour</li>
                        <li>Walk during phone calls</li>
                    </ul>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="card activity-card">
                <h2>üìù Recent Activity</h2>
                <div class="activity-list" id="activityList">
                    <p class="no-activity">No activity yet. Start walking! üö∂‚Äç‚ôÇÔ∏è</p>
                </div>
            </div>

            <!-- Admin Dashboard -->
            <div class="card admin-dashboard" id="adminDashboard" style="display: none;">
                <div class="admin-header">
                    <h2>üîê Admin Dashboard</h2>
                    <button class="btn btn-secondary" id="adminLogoutBtn">Logout</button>
                </div>
                
                <div class="admin-stats">
                    <div class="admin-stat-card">
                        <div class="admin-stat-value" id="pendingCount">0</div>
                        <div class="admin-stat-label">Pending Validations</div>
                    </div>
                    <div class="admin-stat-card">
                        <div class="admin-stat-value" id="approvedCount">0</div>
                        <div class="admin-stat-label">Approved Entries</div>
                    </div>
                    <div class="admin-stat-card">
                        <div class="admin-stat-value" id="rejectedCount">0</div>
                        <div class="admin-stat-label">Rejected Entries</div>
                    </div>
                </div>

                <div class="admin-filters">
                    <button class="filter-btn active" data-filter="pending">Pending</button>
                    <button class="filter-btn" data-filter="approved">Approved</button>
                    <button class="filter-btn" data-filter="rejected">Rejected</button>
                    <button class="filter-btn" data-filter="all">All</button>
                </div>

                <div class="validation-list" id="validationList">
                    <p class="no-entries">No entries to validate</p>
                </div>
            </div>
        </div>

        <footer>
            <p>¬© 2026 CSG International | WoW-CSG Stepathon Challenge | Let's get moving together! üí™</p>
            <p class="footer-subtext">Powered by CSG - Connecting People, Enabling Possibilities</p>
            <p class="footer-help">
                <a href="#" id="footerHelpLink" class="help-link">‚ùì Need Help? Contact us at wow-csg@csgi.com</a>
            </p>
        </footer>

        <!-- Help Modal -->
        <div class="modal-overlay" id="helpModal" style="display: none;">
            <div class="modal-content help-modal">
                <div class="modal-header">
                    <h2>‚ùì Help & Support</h2>
                    <button class="modal-close" onclick="app.closeHelpModal()">√ó</button>
                </div>
                <div class="modal-body">
                    <div class="help-section">
                        <h3>üìß Contact Support</h3>
                        <p>If you need assistance with the Stepathon Challenge, please reach out to us:</p>
                        <div class="contact-info">
                            <div class="contact-item">
                                <strong>Email:</strong>
                                <a href="mailto:wow-csg@csgi.com?subject=Stepathon Challenge Support&body=Hello,%0D%0A%0D%0AI need help with:" class="contact-link">
                                    wow-csg@csgi.com
                                </a>
                                <button class="btn btn-primary btn-small" onclick="app.openEmailClient()" style="margin-top: 10px;">
                                    üìß Open Email Client
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="help-section">
                        <h3>‚ùì Frequently Asked Questions</h3>
                        <div class="faq-item">
                            <strong>Q: How do I add my steps?</strong>
                            <p>A: You can add steps using three methods: Step Counter (real-time tracking), Manual Entry, or by uploading a screenshot from your fitness app.</p>
                        </div>
                        <div class="faq-item">
                            <strong>Q: Do I need to provide a screenshot?</strong>
                            <p>A: Screenshots are required for manual entry validation. However, if you use the Step Counter feature, screenshots are optional.</p>
                        </div>
                        <div class="faq-item">
                            <strong>Q: How is my daily goal calculated?</strong>
                            <p>A: The daily goal is set to 10,000 steps. You can track your progress in the Daily Goal Progress section.</p>
                        </div>
                        <div class="faq-item">
                            <strong>Q: What if I forgot my password?</strong>
                            <p>A: Please contact support at wow-csg@csgi.com to reset your password.</p>
                        </div>
                        <div class="faq-item">
                            <strong>Q: How do I check my ranking?</strong>
                            <p>A: Your current rank is displayed in the stats cards. You can also view the full leaderboard below your dashboard.</p>
                        </div>
                    </div>

                    <div class="help-section">
                        <h3>üí° Tips</h3>
                        <ul class="help-tips">
                            <li>Use the Step Counter feature for real-time step tracking</li>
                            <li>Take screenshots of your fitness app to validate manual entries</li>
                            <li>Check the leaderboard regularly to see your progress</li>
                            <li>Maintain your daily streak by logging steps every day</li>
                            <li>Contact support if you encounter any technical issues</li>
                        </ul>
                    </div>

                    <div class="help-actions">
                        <a href="mailto:wow-csg@csgi.com?subject=Stepathon Challenge Support&body=Hello,%0D%0A%0D%0AI need help with:" class="btn btn-primary">
                            üìß Contact Support
                        </a>
                        <button class="btn btn-secondary" onclick="app.closeHelpModal()">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase (optional - enables cross-device login) -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="firebase-config.js"></script>
    <script src="script.js"></script>
    
    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./service-worker.js')
                    .then((registration) => {
                        console.log('Service Worker registered:', registration);
                    })
                    .catch((error) => {
                        console.log('Service Worker registration failed:', error);
                    });
            });
        }
    </script>
    
    <!-- Capacitor (for Android app) -->
    <script type="module">
        import { Capacitor } from '@capacitor/core';
        import { App } from '@capacitor/app';
        import { StatusBar, Style } from '@capacitor/status-bar';
        import { SplashScreen } from '@capacitor/splash-screen';
        import { Keyboard } from '@capacitor/keyboard';
        
        // Initialize Capacitor plugins when running as native app
        if (Capacitor.isNativePlatform()) {
            // Set status bar style
            StatusBar.setStyle({ style: Style.Light });
            StatusBar.setBackgroundColor({ color: '#003366' });
            
            // Hide splash screen after app is ready
            SplashScreen.hide();
            
            // Handle app state changes
            App.addListener('appStateChange', ({ isActive }) => {
                console.log('App state changed. Is active?', isActive);
            });
            
            // Handle back button (Android)
            App.addListener('backButton', ({ canGoBack }) => {
                if (!canGoBack) {
                    App.exitApp();
                } else {
                    window.history.back();
                }
            });
            
            // Handle keyboard events
            Keyboard.addListener('keyboardWillShow', info => {
                console.log('keyboard will show with height:', info.keyboardHeight);
            });
            
            Keyboard.addListener('keyboardWillHide', () => {
                console.log('keyboard will hide');
            });
        }
    </script>
</body>
</html>

